*,
*::before,
*::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

@import url("https://fonts.googleapis.com/css2?family=Anton&display=swap");

@mixin effect($bcolor, $url, $x1, $y1, $bor, $col) {
    background: $bcolor;
    -webkit-mask: url($url);
    mask: url($url);
    -webkit-mask-size: $x1 $y1;
    mask-size: $x1 $y1;
    border: $bor;
    color: $col;
}

body {
    overflow-x: hidden;
}

/* mask.html */
.background {
    position: relative;
    width: 100%;
    height: 100vh;
    overflow: hidden;
    // background: url(../images/bg_brown.jpg) no-repeat center;
    // background-size: 100%;

    video {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
    }

    .visual {
        position: absolute; top: 50px; left:50px;
        display: flex;
        flex-direction: column;
        justify-content: space-around;
        align-items: center;
    }

    .effect {
        position: absolute; top:0; left:0;
        z-index: 100;
        width: 101%;
        height: 100%;
        cursor: pointer;

        @include effect(#000, "../images/effect1.png", 3000%, 100%, none, #fff);
        // 가리기
        // -webkit-animation: ani2 0.7s steps(29) forwards;
        // animation: ani2 0.7s steps(29) forwards;

        // 펼치기
        // -webkit-animation: ani 0.7s steps(29) forwards;
        // animation: ani 0.7s steps(29) forwards;

        &.on {
            -webkit-animation: ani 1.2s steps(29) forwards;
            animation: ani 1.2s steps(29) forwards;
        }

        #clickMe {
            position: fixed;
            width: 100%;
            bottom: 30px;
            font-size: 16px;
            font-family: "Anton", sans-serif;
            font-weight: 400;
            font-style: normal;
            color: #999;

            @media screen and (max-width: 600px) {
                bottom: 40px;
                font-size: 14px;
            }
        }
    }
}

/* mask2.html */
.background2 {
    position: relative;
    width: 100%;
    height: 100vh;
    overflow: hidden;

    video {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
    }

    .effect {
        position: relative;
        z-index: 100;
        width: 101%;
        height: 100%;
        cursor: pointer;

        @include effect(#000, "../images/effect2.png", 2300%, 100%, none, #fff);

        &.on {
            -webkit-animation: ani 0.8s steps(22) forwards;
            animation: ani 0.8s steps(22) forwards;
        }
    }
}

/* mask3.html */
.background3 {
    position: relative;
    width: 100%;
    height: 100vh;
    overflow: hidden;

    video {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
    }

    .effect {
        position: relative;
        z-index: 100;
        width: 101%;
        height: 100%;
        cursor: pointer;

        @include effect(#000, "../images/effect3.png", 7100%, 100%, none, #fff);

        &.on {
            -webkit-animation: ani 0.8s steps(70) forwards;
            animation: ani 0.8s steps(70) forwards;
        }
    }
}

@-webkit-keyframes ani {
    from {
        -webkit-mask-position: 0 0;
        mask-position: 0 0;
    }

    to {
        -webkit-mask-position: 100% 0;
        mask-position: 100% 0;
    }
}

@keyframes ani {
    from {
        -webkit-mask-position: 0 0;
        mask-position: 0 0;
    }

    to {
        -webkit-mask-position: 100% 0;
        mask-position: 100% 0;
    }
}

@-webkit-keyframes ani2 {
    from {
        -webkit-mask-position: 100% 0;
        mask-position: 100% 0;
    }

    to {
        -webkit-mask-position: 0 0;
        mask-position: 0 0;
    }
}

@keyframes ani2 {
    from {
        -webkit-mask-position: 100% 0;
        mask-position: 100% 0;
    }

    to {
        -webkit-mask-position: 0 0;
        mask-position: 0 0;
    }
}

#container {
    position: fixed;
    top: 50%;
    left: 50%;
    z-index: 100;
    transform: translate(-50%, -50%);
    display: block;
    color: #999;
    text-transform: uppercase;
    font-size: 50px;
    font-family: "Anton", sans-serif;
    font-weight: 400;
    font-style: normal;

    #flip {
        height: 75px;
        overflow: hidden;

        div {
            &:first-child {
                animation: show 5s linear infinite;
                div {
                    background: #4ec7f3;
                }
            }
            &:last-child {
                div {
                    background: #dc143c;
                }
            }
            div {
                color: #fff;
                padding: 0 20px;
                margin-bottom: 75px;
                display: inline-block;
                background: #42c58a;
                border-radius: 8px;
            }
        }
    }
}

@keyframes show {
    0% {
        margin-top: -375px;
    }
    5% {
        margin-top: -300px;
    }
    33% {
        margin-top: -300px;
    }
    38% {
        margin-top: -150px;
    }
    66% {
        margin-top: -150px;
    }
    71% {
        margin-top: 0px;
    }
    99.99% {
        margin-top: 0px;
    }
    100% {
        margin-top: -375px;
    }
}

.block-effect {
    font-size: calc(8px + 6vw);
    
    .block-reveal {
        --t: calc(var(--td) + var(--d));
        color: transparent;
        padding: 4px;
        position: relative;
        overflow: hidden;
        font-family: "Anton", sans-serif;
        font-weight: 400;
        font-style: normal;
        
        &::after {
            content: "";
            width: 0%;
            height: 100%;
            padding-bottom: 4px;
            position: absolute;
            top: 0;
            left: 0;
            background: var(--bc);
        }

        &.on{
            animation: revealBlock 0s var(--t) forwards;
            &::after{
                animation:revealingIn var(--td) var(--d) forwards, revealingOut var(--td) var(--t) forwards;
            }
        }
    }
}

@keyframes revealBlock {
    100% {
        color: #fff;
    }
}

@keyframes revealingIn {
    0% {
        width: 0;
    }

    100% {
        width: 100%;
    }
}

@keyframes revealingOut {
    0% {
        transform: translateX(0);
    }

    100% {
        transform: translateX(100%);
    }
}
